(this["webpackJsonpstock-tracker"]=this["webpackJsonpstock-tracker"]||[]).push([[0],{18:function(e,t,a){e.exports=a(28)},27:function(e,t,a){},28:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(16),c=a.n(o),l=a(6),s=a(7),i=a(9),u=a(8),m=function(){return r.a.createElement("div",{className:"header"},r.a.createElement("h1",null,"Stock-Tracker"))},p=a(13),d=a(11),h=a(10),f=a(17),b=new(a(14).w3cwebsocket)("wss://ws.finnhub.io?token=bs17pofrh5r8enj77ptg"),g=a(3),v=function(e){try{if(0===e.logo.length&&0!==e.website.length){var t="https://logo.clearbit.com/"+e.website.split("www.")[1];return r.a.createElement("a",{href:e.website},r.a.createElement(g.a.Img,{bsPrefix:"card-img",variant:"top",src:t,className:"mx-auto"}))}return 0!==e.logo.length&&0!==e.website.length?r.a.createElement("a",{href:e.website},r.a.createElement(g.a.Img,{bsPrefix:"card-img",variant:"top",src:e.logo,className:"mx-auto"})):r.a.createElement(g.a.Img,{alt:"cannot find image"})}catch(a){return r.a.createElement(g.a.Img,{alt:"STOCK is not Avaliable"})}},E=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a.Subtitle,null,e.fullName," ",r.a.createElement("p",{className:"text-muted"},"(",e.symbol,")")))},O=a(12),y=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleCompanyProfile=function(e){fetch("https://finnhub.io/api/v1/stock/profile2?symbol="+e+"&token=bs17pofrh5r8enj77ptg").then((function(e){return e.json()})).then((function(e){n.setState({companyProfile:{logo:e.logo,subName:e.name,website:e.weburl}})}))},n.state={companyProfile:{logo:"",subName:"",website:""}},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.handleCompanyProfile(this.props.name)}},{key:"handleColor",value:function(){var e=(this.props.value-this.props.openPrice).toFixed(2)<=0?"- ":"+ ",t=e+Math.abs(this.props.value-this.props.openPrice).toFixed(2),a="";return a="- "===e?"text-danger":"text-success",r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a.Text,{className:a},t))}},{key:"render",value:function(){var e=this,t=this.props.name,a=this.props.value;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"column"},r.a.createElement(g.a,null,r.a.createElement("div",{className:"imgCard"},r.a.createElement(v,{key:t,website:this.state.companyProfile.website,logo:this.state.companyProfile.logo})),r.a.createElement(g.a.Body,null,r.a.createElement(g.a.Title,null,r.a.createElement(E,{symbol:t,fullName:this.state.companyProfile.subName})),r.a.createElement(g.a.Text,null,r.a.createElement("strong",null,"$",a)),this.handleColor()),r.a.createElement(O.a,{className:"btn-danger",onClick:function(){return e.props.onDelete(e.props.name)}},"Unsubscribe"))))}}]),a}(n.Component),k=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).connect=function(){var e=(new Date).toLocaleString("en-US",{timeZone:"America/New_York"}),t=new Date(e).getHours(),a=new Date(e).getMinutes();t>=9&&a>30&&t<16?(n.handleOpenMarket(),n.setState({closeOrOpen:!0})):(console.log("something"),n.handleCloseMarket(),n.setState({closeOrOpen:!1}))},n.handleOpenMarket=function(){b.onopen=function(){n.state.data.map((function(e){b.send(JSON.stringify({type:"subscribe",symbol:e})),n.setState({prices:Object(h.a)({},e,"")})}))},b.onmessage=function(e){if("t"!==e.data[2]){var t=JSON.parse(e.data).data;n.setState((function(e){return{prices:Object(d.a)(Object(d.a)({},e.prices),{},Object(h.a)({},t[0].s,t[0].p))}}))}}},n.handleCloseMarket=function(){n.state.data.map((function(e){fetch("https://finnhub.io/api/v1/quote?symbol="+e+"&token=bs17pofrh5r8enj77ptg").then((function(e){if(!e.ok)throw new Error("Network response was not ok");return e.json()})).then((function(t){"undefined"!==typeof t.error?n.handleErrorStock():n.setState((function(a){var n;return{prices:Object(d.a)(Object(d.a)({},a.prices),{},(n={},Object(h.a)(n,e,t.c),Object(h.a)(n,e+"open",t.o),n))}}))}))}))},n.handleClose=function(){b.close()},n.handleDelete=function(e){b.send(JSON.stringify({type:"unsubscribe",symbol:e})),n.setState((function(t){return{data:Object(p.a)(t.data.filter((function(t){return t!==e})))}}))},n.handleAdd=function(e){n.state.closeOrOpen?(n.setState({value:""}),n.setState((function(t){return{data:[].concat(Object(p.a)(t.data),[e])}}),b.onopen=function(){n.state.data.map((function(e){b.send(JSON.stringify({type:"subscribe",symbol:e})),n.setState({prices:Object(h.a)({},e,"")})}))})):n.setState({data:[].concat(Object(p.a)(n.state.data),[e])},(function(){n.handleCloseMarket()}))},n.handleDuplicatedStock=function(){var e=document.getElementsByClassName("add")[0];n.setState({value:""}),e.placeholder="You have already enter this task"},n.handleErrorStock=function(){var e=document.getElementsByClassName("add")[0];n.setState({value:""}),e.placeholder="Stock is not Avaliable"},n.handleChange=function(e){n.setState({value:e.target.value})},n.handleSubmit=function(e){e.preventDefault(),!0!==n.state.data.includes(n.state.value)?n.handleAdd(n.state.value):n.handleDuplicatedStock()},n.state={data:["AMD","AAPL","DAL"],id:"0",prices:{},prePrice:"",value:"",closeOrOpen:"",openPrice:""},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.connect()}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("input",{placeholder:"Add Stock",value:this.state.value,onChange:this.handleChange,type:"text",className:"add"}),r.a.createElement("div",{className:"buttons"},r.a.createElement(O.a,{type:"submit",className:"b btn btn-success"},r.a.createElement("i",{className:"fa fa-plus"})))),r.a.createElement(f.a,{className:"newCss py-5 bg-faded"},r.a.createElement("div",{className:"row"},this.state.data.map((function(t,a){return r.a.createElement(y,{key:a,name:t,onDelete:e.handleDelete,value:e.state.prices[t],openPrice:e.state.prices[t+"open"],openOrnot:e.state.closeOrOpen})})))))}}]),a}(n.Component),S=(n.Component,function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={},e}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(m,null),r.a.createElement(k,null))}}]),a}(n.Component));a(26),a(27);c.a.render(r.a.createElement(S,null),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.7d5a7749.chunk.js.map